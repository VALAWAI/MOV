@if (connection$ |async; as connection) {
  <div
    class="p-7 gap-3 flex flex-col items-center justify-center content-center"
    >
    <div class="max-w-3xl grid grid-cols-2 gap-3">
      <div class="text-left font-bold"
      i18n="The label of the connection enabled attribute@@main_topology_connections_show_enabled-label">Enabled</div>
      <div class="text-left">
        @if (connection.enabled) {
          <mat-icon color="primary">wifi_on</mat-icon>
        }
        @if (!connection.enabled) {
          <mat-icon color="warn">wifi_off</mat-icon>
        }
      </div>
      <div class="text-left font-bold"
        i18n="The label of the connection created attribute@@main_topology_connections_show_create-timestamp-label">Created
			at</div>
      <div class="text-left">{{connection.createTimestamp|timestamp:'short'}}</div>
      <div class="text-left font-bold"
        i18n="The label of the connection updated attribute@@main_topology_connections_show_update-timestamp-label">Updated
			at</div>
      <div class="text-left">{{connection.updateTimestamp|timestamp:'short'}}</div>
      <div class="text-left font-bold col-span-2"
      i18n="The label of the connection source attribute@@main_topology_connections_show_source-label">Source</div>
      <div class="text-left pl-7 font-bold"
      i18n="The label of the connection source attribute@@main_topology_connections_show_node-component-label">Component</div>
      <div class="text-left">
        {{connection.source?.component?.name}}
        <button mat-icon-button color="primary"
          [routerLink]="['/main/topology/live/components',connection.source?.component?.id,'show']"
          [queryParams]="{'connectionId':connection.id}">
          <mat-icon>link</mat-icon>
        </button>
      </div>
      @if (connection.source?.component?.description) {
        <div class="text-left pl-7 col-span-2"
        >{{connection.source?.component?.description}}</div>
      }
      <div class="text-left pl-7 font-bold"
      i18n="The label of the connection source node channel@@main_topology_connections_show_node-channel-label">Channel</div>
      <div class="text-left">{{connection.source?.channel?.name}}</div>
      @if (connection.source?.channel?.description) {
        <div class="text-left pl-7 col-span-2"
        >{{connection.source?.channel?.description}}</div>
      }
      <app-channels-view class="text-left pl-7 col-span-2"
      [channels]="connection.source?.channel"></app-channels-view>
      <div class="text-left font-bold col-span-2"
      i18n="The label of the connection target attribute@@main_topology_connections_show_target-label">Target</div>
      <div class="text-left pl-7 font-bold"
      i18n="The label of the connection target attribute@@main_topology_connections_show_node-component-label">Component</div>
      <div class="text-left">
        {{connection.target?.component?.name}}
        <button mat-icon-button color="primary"
          [routerLink]="['/main/topology/live/components',connection.target?.component?.id,'show']"
          [queryParams]="{'connectionId':connection.id}">
          <mat-icon>link</mat-icon>
        </button>
      </div>
      @if (connection.target?.component?.description) {
        <div class="text-left pl-7 col-span-2"
        >{{connection.target?.component?.description}}</div>
      }
      <div class="text-left pl-7 font-bold"
      i18n="The label of the connection target node channel@@main_topology_connections_show_node-channel-label">Channel</div>
      <div class="text-left">{{connection.target?.channel?.name}}</div>
      @if (connection.target?.channel?.description) {
        <div class="text-left pl-7 col-span-2"
        >{{connection.target?.channel?.description}}</div>
      }
      @if (connection.target?.channel?.subscribe) {
        <div class="text-left pl-11 font-bold"
        i18n="The label of the connection target node channel subscribe@@main_topology_connections_show_node-channel-subscribe-label">Subscribe</div>
      }
      <app-channels-view class="text-left pl-7 col-span-2"
      [channels]="connection.target?.channel"></app-channels-view>
      @if (connection.subscriptions) {
        <div class="text-left font-bold col-span-2"
        i18n="The label of the connection subscriptions attribute@@main_topology_connections_show_subscriptions-label">Subscriptions</div>
      }
      @if (connection.subscriptions) {
        <div class="text-left pl-11 col-span-2"
          >
          @for (subscrition of connection.subscriptions; track subscrition) {
            <div>
              {{subscrition.channel?.name}}
              <button mat-icon-button color="primary"
                [routerLink]="['/main/topology/live/components',subscrition.component?.id,'show']"
                [queryParams]="{'connectionId':connection.id}">
                <mat-icon>link</mat-icon>
              </button>
            </div>
          }
        </div>
      }
    </div>
    <div class="gap-3 flex flex-row">
      <button mat-raised-button color="primary"
        routerLink="/main/topology/live/connections"
        i18n="The label of the button to go back to the connections@@main_topology_connections_show_go-back-label">Go
			to connections</button>
      @if (componentId!=null) {
        <button mat-raised-button color="primary"
          routerLink="/main/topology/live/connections"
          [queryParams]="{'componentId':componentId}"
          i18n="The label of the button to go back to the component connections@@main_topology_connections_show_go-back-to-component-connections-label">Go
			to component connections</button>
      }
    </div>
  </div>
} @else {
  <app-loading></app-loading>
}
